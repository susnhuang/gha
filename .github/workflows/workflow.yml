name: Branch-specific Python Script

on:
  push:
    # Specify the branches this workflow should run on
    branches:
      - 'feature/**' # Wildcard pattern for feature branches
  workflow_dispatch:
    inputs:
      EXT_1:
        description: 'An example input parameter'
        required: false
        default: 'default_value'
        type: string

jobs:
  run-script:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10' # Specify your required Python version

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          # Add any other pip install commands here

      - name: Execute Python script with branch name env var
        # The GITHUB_REF_NAME variable is automatically available as an environment variable
        run: python src/test.py
        env:
          DEFAULT_EXT_1: "default_ext_1"
          BRANCH_NAME: ${{ github.ref_name }} # Pass the branch name context as an environment variable
      - name: Upload log file as artifact
        uses: actions/upload-artifact@v4
        with:
          name: python-script-logs
          path: app.log